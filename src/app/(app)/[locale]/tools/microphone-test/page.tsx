import type { Metadata } from "next"
import { MicrophoneTest } from "@/modules/tools"

export const metadata: Metadata = {
  title: "Mikrofon Test - Bepul Audio Sifat va Yozish Tool | Webiston",
  description:
    "Eng yaxshi bepul mikrofon test vositasi. Audio sifatini tekshiring, real-time visualizatsiya ko'ring va professional audio yozing.",
  keywords: [
    // O'zbek tilida eng ko'p qidirilgan
    "mikrofon test",
    "mikrofon sinash",
    "audio test",
    "audio sifat",
    "mikrofon sifati",
    "ovoz test",
    "tovush test",
    "mikrofon tekshirish",
    "audio tekshirish",
    "mikrofon yozish",
    "audio yozish",
    "ovoz yozish",
    "mikrofon recorder",
    "audio recorder",
    "bepul mikrofon test",
    "onlayn mikrofon test",
    "mikrofon vositasi",
    "audio vositasi",
    "mikrofon tool",
    "audio tool",
    "real-time audio",
    "audio visualization",
    "mikrofon visualizatsiya",
    "audio spektr",
    "tovush spektri",
    "mikrofon daraja",
    "audio level",
    "mikrofon quality",
    "audio quality",
    "professional mikrofon",
    "studio mikrofon",

    // Ingliz tilida
    "microphone test online",
    "free microphone test",
    "mic test online",
    "microphone tester",
    "audio quality test",
    "voice test online",
    "sound test online",
    "microphone quality test",
    "audio recording test",
    "microphone recorder",
    "audio recorder online",
    "real-time microphone test",
    "microphone visualization",
    "audio spectrum analyzer",
    "microphone level meter",
    "voice recording test",
    "sound quality test",
    "microphone analysis",
    "audio analysis tool",
    "professional microphone test",
    "studio microphone test",
    "podcast microphone test",
    "streaming microphone test",
    "gaming microphone test",
    "usb microphone test",
    "wireless microphone test",
    "bluetooth microphone test",
    "headset microphone test",
    "webcam microphone test",
    "laptop microphone test",
    "phone microphone test",
    "browser microphone test",
    "html5 microphone test",
    "webrtc microphone test",
    "no download microphone test",
    "instant microphone test",
    "quick microphone test",
    "simple microphone test",
    "easy microphone test",

    // Rus tilida
    "тест микрофона онлайн",
    "проверка микрофона",
    "тестирование микрофона",
    "качество микрофона",
    "проверка звука",
    "тест звука онлайн",
    "анализ микрофона",
    "запись с микрофона",
    "тест качества звука",
    "микрофон онлайн тест",
    "бесплатный тест микрофона",
    "проверка качества микрофона",
    "анализатор звука",
    "визуализация звука",
    "спектр звука",
    "уровень микрофона",
    "профессиональный тест микрофона",
    "студийный микрофон тест",
    "подкаст микрофон тест",
    "стриминг микрофон тест",
    "игровой микрофон тест",
    "usb микрофон тест",
    "беспроводной микрофон тест",
    "bluetooth микрофон тест",
    "гарнитура микрофон тест",
    "веб камера микрофон тест",
    "ноутбук микрофон тест",
    "телефон микрофон тест",
    "браузер микрофон тест",
    "html5 микрофон тест",
    "webrtc микрофон тест",

    // Long-tail keywords
    "mikrofon sifatini qanday tekshirish",
    "how to test microphone quality online free",
    "как проверить качество микрофона онлайн бесплатно",
    "webiston microphone tools",
    "professional microphone testing online free",
    "microphone quality analyzer with visualization",
    "онлайн тест микрофона с анализом качества",
    "бесплатный анализатор микрофона без установки программ",
    "mikrofon va audio sifat professional test",
    "microphone test and audio recording online free",
    "тестирование микрофона и запись звука в браузере",
    "professional microphone test uzbek interface",
    "uzbek microphone test with audio recording",
    "узбекский интерфейс тест микрофона онлайн"
  ],
  openGraph: {
    title: "Mikrofon Test - Bepul Audio Sifat va Yozish Tool | Webiston",
    description:
      "Eng yaxshi bepul mikrofon test vositasi. Audio sifatini tekshiring, real-time visualizatsiya ko'ring va professional audio yozing.",
    type: "website",
    locale: "uz_UZ",
    siteName: "Webiston",
    url: "https://webiston.uz/tools/microphone-test",
    images: [
      {
        url: "https://webiston.uz/logo.png",
        width: 1200,
        height: 630,
        alt: "Mikrofon Test - Bepul Audio Sifat va Yozish Tool",
        type: "image/png"
      }
    ]
  },
  twitter: {
    card: "summary_large_image",
    site: "@webiston_uz",
    creator: "@webiston_uz",
    title: "Mikrofon Test - Bepul Audio Tool",
    description:
      "Professional mikrofon test. Audio sifatini tekshiring, real-time visualizatsiya ko'ring. Bepul!",
    images: ["https://webiston.uz/logo.png"]
  },
  alternates: {
    canonical: "https://webiston.uz/tools/microphone-test",
    languages: {
      uz: "https://webiston.uz/tools/microphone-test",
      en: "https://webiston.uz/en/tools/microphone-test",
      "x-default": "https://webiston.uz/tools/microphone-test"
    }
  },
  robots: {
    index: true,
    follow: true,
    googleBot: {
      index: true,
      follow: true,
      "max-video-preview": -1,
      "max-image-preview": "large",
      "max-snippet": -1
    }
  },
  category: "technology",
  classification: "Tools and Utilities",
  referrer: "origin-when-cross-origin",
  formatDetection: {
    email: false,
    address: false,
    telephone: false
  }
}

const structuredData = {
  "@context": "https://schema.org",
  "@type": ["WebApplication", "SoftwareApplication"],
  name: "Mikrofon Test - Bepul Audio Sifat va Yozish Tool",
  alternateName: [
    "Microphone Test",
    "Audio Test",
    "Mic Test",
    "Mikrofon Sinash"
  ],
  description:
    "Professional mikrofon test vositasi. Audio sifatini tekshirish, real-time visualizatsiya va yozish uchun bepul tool.",
  url: "https://webiston.uz/tools/microphone-test",
  sameAs: [
    "https://webiston.uz/en/tools/microphone-test",
    "https://webiston.uz/tools/microphone-test"
  ],
  applicationCategory: ["MultimediaApplication", "UtilityApplication"],
  operatingSystem: ["Windows", "macOS", "Linux", "Android", "iOS"],
  browserRequirements:
    "Requires JavaScript. Requires HTML5. Requires Microphone Access.",
  permissions: "microphone",
  isAccessibleForFree: true,
  offers: {
    "@type": "Offer",
    price: "0",
    priceCurrency: "USD",
    availability: "https://schema.org/InStock",
    validFrom: "2024-01-01"
  },
  author: {
    "@type": "Organization",
    name: "Webiston",
    url: "https://webiston.uz",
    logo: "https://webiston.uz/logo.png",
    sameAs: ["https://github.com/webiston", "https://twitter.com/webiston_uz"]
  },
  publisher: {
    "@type": "Organization",
    name: "Webiston",
    url: "https://webiston.uz",
    logo: {
      "@type": "ImageObject",
      url: "https://webiston.uz/logo.png",
      width: 512,
      height: 512
    }
  },
  featureList: [
    "Mikrofon sifat test",
    "Real-time audio visualizatsiya",
    "Audio yozish va recording",
    "Multiple mikrofon support",
    "Audio spektr tahlili",
    "Professional audio meters",
    "Noise level detection",
    "Audio quality scoring",
    "Turli audio formatlar",
    "Professional interfeys",
    "Bepul va cheksiz foydalanish",
    "Browser-based testing",
    "No software installation",
    "Cross-platform support",
    "Privacy-focused (local processing)",
    "Real-time feedback"
  ],
  softwareVersion: "2.0",
  datePublished: "2024-01-01",
  dateModified: "2025-01-01",
  inLanguage: ["uz", "en"],
  keywords:
    "mikrofon test, microphone test, audio quality, bepul mikrofon test",
  aggregateRating: {
    "@type": "AggregateRating",
    ratingValue: "4.9",
    ratingCount: "2250",
    bestRating: "5",
    worstRating: "1"
  },
  review: [
    {
      "@type": "Review",
      author: {
        "@type": "Person",
        name: "Foydalanuvchi"
      },
      reviewRating: {
        "@type": "Rating",
        ratingValue: "5",
        bestRating: "5"
      },
      reviewBody:
        "Mikrofon sifatini tekshirish uchun juda foydali vosita. Real-time visualizatsiya ajoyib!"
    }
  ]
}

// FAQ Schema for better SERP features (locale-based)
function generateFAQSchema(locale: string = "uz") {
  const faqData = {
    uz: {
      questions: [
        {
          question: "Mikrofon test qanday ishlaydi?",
          answer:
            "Mikrofon test brauzeringiz orqali mikrofoningizga kirish so'raydi, keyin real-time audio tahlil, sifat baholash va yozish imkoniyatini beradi."
        },
        {
          question: "Audio yozuvlar qayerga saqlanadi?",
          answer:
            "Barcha audio yozuvlar sizning qurilmangizda mahalliy saqlanadi. Hech qanday ma'lumot serverga yuborilmaydi."
        },
        {
          question: "Qanday audio formatlarini qo'llab-quvvatlaydi?",
          answer:
            "WebM/Opus formatida audio yozish qo'llab-quvvatlanadi. Bu zamonaviy va yuqori sifatli format."
        },
        {
          question: "Mikrofon test bepulmi?",
          answer:
            "Ha, bizning mikrofon test to'liq bepul. Hech qanday cheklov yoki to'lov talab qilinmaydi."
        }
      ]
    },
    en: {
      questions: [
        {
          question: "How does microphone test work?",
          answer:
            "Microphone test requests access to your microphone through browser, then provides real-time audio analysis, quality assessment and recording capabilities."
        },
        {
          question: "Where are audio recordings saved?",
          answer:
            "All audio recordings are saved locally on your device. No data is sent to servers."
        },
        {
          question: "What audio formats are supported?",
          answer:
            "WebM/Opus format audio recording is supported. This is a modern and high-quality format."
        },
        {
          question: "Is microphone test free?",
          answer:
            "Yes, our microphone test is completely free. No limitations or payments required."
        }
      ]
    }
  }

  const currentFAQ = faqData[locale as keyof typeof faqData] || faqData.uz

  return {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: currentFAQ.questions.map((item) => ({
      "@type": "Question",
      name: item.question,
      acceptedAnswer: {
        "@type": "Answer",
        text: item.answer
      }
    }))
  }
}

// Breadcrumb Schema (locale-based)
function generateBreadcrumbSchema(locale: string = "uz") {
  const breadcrumbData = {
    uz: {
      home: "Bosh sahifa",
      tools: "Vositalar",
      microphoneTest: "Mikrofon Test"
    },
    en: {
      home: "Home",
      tools: "Tools",
      microphoneTest: "Microphone Test"
    }
  }

  const current =
    breadcrumbData[locale as keyof typeof breadcrumbData] || breadcrumbData.uz
  const baseUrl =
    locale === "en" ? "https://webiston.uz/en" : "https://webiston.uz"

  return {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    itemListElement: [
      {
        "@type": "ListItem",
        position: 1,
        name: current.home,
        item: locale === "en" ? "https://webiston.uz/en" : "https://webiston.uz"
      },
      {
        "@type": "ListItem",
        position: 2,
        name: current.tools,
        item: `${baseUrl}/tools`
      },
      {
        "@type": "ListItem",
        position: 3,
        name: current.microphoneTest,
        item: `${baseUrl}/tools/microphone-test`
      }
    ]
  }
}

export default async function MicrophoneTestPage({
  params
}: {
  params: Promise<{ locale: string }>
}) {
  const { locale } = (await params) || { locale: "uz" }

  // Generate locale-specific schemas
  const faqSchema = generateFAQSchema(locale)
  const breadcrumbSchema = generateBreadcrumbSchema(locale)

  return (
    <>
      {/* Main Application Schema */}
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}
      />

      {/* FAQ Schema for rich snippets */}
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(faqSchema) }}
      />

      {/* Breadcrumb Schema */}
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{ __html: JSON.stringify(breadcrumbSchema) }}
      />

      <MicrophoneTest />
    </>
  )
}
